const CACHE_NAME="storyapp-v1",urlsToCache=["./","./index.html","./favicon.png","./app.bundle.js","./app.css","./manifest.json","./icon-192.png","./icon-512.png"];self.addEventListener("install",(e=>{console.log("[SW] Installing..."),e.waitUntil(caches.open(CACHE_NAME).then((e=>(console.log("[SW] Precaching App Shell"),e.addAll(urlsToCache)))))})),self.addEventListener("activate",(e=>{console.log("[SW] Activating..."),e.waitUntil(caches.keys().then((e=>Promise.all(e.map((e=>{if(e!==CACHE_NAME)return console.log("[SW] Deleting old cache:",e),caches.delete(e)})))))),self.clients.claim()})),self.addEventListener("fetch",(e=>{"GET"===e.request.method&&("navigate"!==e.request.mode?e.respondWith(caches.match(e.request).then((t=>t||fetch(e.request)))):e.respondWith(fetch(e.request).catch((()=>caches.match("./index.html")))))})),self.addEventListener("push",(e=>{const t=e.data?e.data.json():{},n={body:t.options?.body||"Ada cerita baru dari Story App!",icon:"/favicon.png",badge:"/favicon.png"},i=t.title||"Story App";e.waitUntil(self.registration.showNotification(i,n))})),self.addEventListener("notificationclick",(e=>{e.notification.close(),e.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then((e=>{const t=e.find((e=>"/"===e.url&&"focus"in e));return t?t.focus():clients.openWindow("/")})))}));